<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>responseSpectrum Command &mdash; OpenSees Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=224b24c6" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/OpenSeesLogo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Applications for Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../interpreters.html">1. OpenSees Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userManual.html">3. Command Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userExamples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../messageBoard.html">5. Questions, Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/license.html">6. Copyright and License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework for Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/sourceCode.html">1. Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/build.html">2. Building Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/references.html">3. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/extend.html">4. Extending Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/contribute.html">5. Contributing Code &amp; Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/issues.html">6. Issues</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OpenSees Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">responseSpectrum Command</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/user/manual/analysis/responseSpectrum.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="responsespectrum-command">
<span id="responsespectrum"></span><h1>responseSpectrum Command<a class="headerlink" href="#responsespectrum-command" title="Link to this heading"></a></h1>
<div class="line-block">
<div class="line">This command is used to perform a response spectrum analysis.</div>
<div class="line">The response spectrum analysis performs N linear analysis steps, where N is the number of eigenvalues requested in a previous call to <a class="reference internal" href="eigen.html#eigen"><span class="std std-ref">eigen Command</span></a>.</div>
<div class="line">For each analysis step, it computes the modal displacements. When the i-th analysis step is complete, all previously defined recorders will be called, so they will record all the results requested by the user, pertaining to the current modal displacements.</div>
<div class="line">The modal combination of these modal displacements (and derived results such as beam forces) is up to the user, and can be easily done via TCL or Python scripting.</div>
</div>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">responseSpectrum</span> <span class="pre">$tsTag</span> <span class="pre">$direction</span> <span class="pre">&lt;-scale</span> <span class="pre">$scale&gt;</span> <span class="pre">&lt;-mode</span> <span class="pre">$mode&gt;</span></span></dt>
<dd></dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$tsTag</p></td>
<td><p><em>integer</em></p></td>
<td><p>The tag of a previously defined <a class="reference internal" href="../model/timeSeries.html#timeseries"><span class="std std-ref">Time Series Command</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>$direction</p></td>
<td><p><em>integer</em></p></td>
<td><p>The 1-based index of the excited DOF (1 to 3 for 2D problems, or 1 to 6 for 3D problems).</p></td>
</tr>
<tr class="row-even"><td><p>-scale</p></td>
<td><p><em>string</em></p></td>
<td><p>Tells the command to use a user-defined scale factor for the computed modal displacements. Not used, placeholder for future implementation.</p></td>
</tr>
<tr class="row-odd"><td><p>$scale</p></td>
<td><p><em>float</em></p></td>
<td><p>User-defined scale factor for the computed modal displacements. Not used, placeholder for future implementation.</p></td>
</tr>
<tr class="row-even"><td><p>-mode</p></td>
<td><p><em>string</em></p></td>
<td><p>Tells the command to compute the modal displacements for just 1 specified mode (by default all modes are processed).</p></td>
</tr>
<tr class="row-odd"><td><p>$mode</p></td>
<td><p><em>integer</em></p></td>
<td><p>The 1-based index of the unique mode to process.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command can be used only if a previous call to <a class="reference internal" href="eigen.html#eigen"><span class="std std-ref">eigen Command</span></a> and <a class="reference internal" href="modalProperties.html#modalproperties"><span class="std std-ref">modalProperties Command</span></a> has been performed.</p></li>
<li><p>It computes only the modal displacements, any modal combination is up to the user.</p></li>
<li><p>The scale factor (-scale $scale) for the output modal displacements is not used now, and it’s there for future implementations. When your model is linear elastic there is no need to use this option. It will be useful in future when we will allow using this command on a nonlinear model as a <strong>linear perturbation</strong> about a certain nonlinear state. In that case, the scale factor can be set to a very small number, so that the computed modal displacements will be very small (linear perturbation) and will not alter the nonlinear state of your model. Then the inverse of the scale factor can be used to post-multiply any result for post-processing.</p></li>
</ul>
</div>
<section id="theory">
<h2>Theory<a class="headerlink" href="#theory" title="Link to this heading"></a></h2>
<div class="line-block">
<div class="line">Once the eigenvalue problem (<a class="reference internal" href="eigen.html#eigen"><span class="std std-ref">eigen Command</span></a>) has been solved, and once the modal properties (<a class="reference internal" href="modalProperties.html#modalproperties"><span class="std std-ref">modalProperties Command</span></a>) have been computed, the modal displacements <span class="math notranslate nohighlight">\(U\)</span> for mode <span class="math notranslate nohighlight">\(i\)</span> at node <span class="math notranslate nohighlight">\(n\)</span> and DOF <span class="math notranslate nohighlight">\(j\)</span> is given by</div>
</div>
<div class="math notranslate nohighlight">
\[U_{ij}^n = \frac{\Phi_{ij}^n \cdot MPF_{ij} \cdot RSf\left(T_i\right)}{\lambda_i}\]</div>
<div class="line-block">
<div class="line">where:</div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\lambda_i\)</span> is the eigenvalue</p></li>
<li><p><span class="math notranslate nohighlight">\(\Phi_{ij}^n\)</span> is the eigenvector</p></li>
<li><p><span class="math notranslate nohighlight">\(MPF_{ij}\)</span> is the modal participation factor</p></li>
<li><p><span class="math notranslate nohighlight">\(RSf\left(T_i\right)\)</span> is the response spectrum function value at period <span class="math notranslate nohighlight">\(T_i\)</span></p></li>
<li><p>and <span class="math notranslate nohighlight">\(T_i\)</span> is the period <span class="math notranslate nohighlight">\(\frac{2\pi}{\sqrt{\lambda_i}}\)</span></p></li>
</ul>
</div></blockquote>
<div class="admonition-example-1-simple-call admonition">
<p class="admonition-title">Example 1: Simple call</p>
<p>The following example shows how to call the responseSpectrum command for all modes, using the time series 1 along the DOF 1 (Ux)</p>
<ol class="arabic simple">
<li><p><strong>Tcl Code</strong></p></li>
</ol>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">set</span><span class="w"> </span>tsTag<span class="w"> </span><span class="mi">1</span><span class="k">;</span><span class="w"> </span><span class="c"># use the timeSeries 1 as response spectrum function</span>
<span class="k">set</span><span class="w"> </span>direction<span class="w"> </span><span class="mi">1</span><span class="k">;</span><span class="w"> </span><span class="c"># excited DOF = Ux</span>
<span class="nv">responseSpectrum</span><span class="w"> </span><span class="nv">$tsTag</span><span class="w"> </span><span class="nv">$direction</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Python Code</strong></p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tsTag</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># use the timeSeries 1 as response spectrum function</span>
<span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># excited DOF = Ux</span>
<span class="n">responseSpectrum</span><span class="p">(</span><span class="n">tsTag</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-example-2-iterative-call admonition">
<p class="admonition-title">Example 2: Iterative call</p>
<p>The following example shows how to call the responseSpectrum command for 1 mode at a time, using the time series 1 along the DOF 1 (Ux)</p>
<ol class="arabic simple">
<li><p><strong>Tcl Code</strong></p></li>
</ol>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">set</span><span class="w"> </span>tsTag<span class="w"> </span><span class="mi">1</span><span class="k">;</span><span class="w"> </span><span class="c"># use the timeSeries 1 as response spectrum function</span>
<span class="k">set</span><span class="w"> </span>direction<span class="w"> </span><span class="mi">1</span><span class="k">;</span><span class="w"> </span><span class="c"># excited DOF = Ux</span>
<span class="k">for</span><span class="w"> </span><span class="k">{set</span><span class="w"> </span>i<span class="w"> </span><span class="mi">0</span><span class="k">}</span><span class="w"> </span><span class="k">{</span><span class="nv">$i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">$num_modes</span><span class="k">}</span><span class="w"> </span><span class="k">{</span><span class="nb">incr</span><span class="w"> </span>i<span class="k">}</span><span class="w"> </span><span class="k">{</span>
<span class="w">   </span><span class="nv">responseSpectrum</span><span class="w"> </span><span class="nv">$tsTag</span><span class="w"> </span><span class="nv">$direction</span><span class="w"> </span><span class="o">-</span>mode<span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
<span class="w">   </span><span class="c"># grab your results here for the i-th modal displacements</span>
<span class="k">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Python Code</strong></p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tsTag</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># use the timeSeries 1 as response spectrum function</span>
<span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># excited DOF = Ux</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_modes</span><span class="p">):</span>
   <span class="n">responseSpectrum</span><span class="p">(</span><span class="n">tsTag</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="s1">&#39;-mode&#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
   <span class="c1"># grab your results here for the i-th modal displacements</span>
</pre></div>
</div>
</div>
<div class="admonition-example-3-complete-structural-example admonition">
<p class="admonition-title">Example 3: Complete Structural Example</p>
<figure class="align-center">
<img alt="../../../_images/responseSpectrum.png" src="../../../_images/responseSpectrum.png" />
</figure>
<div class="line-block">
<div class="line">The following example show a simple 1-bay 2-story building with rigid diaphragms. Units are <strong>Newton</strong> and <strong>meters</strong>.</div>
<div class="line">It shows how to:</div>
</div>
<blockquote>
<div><ul class="simple">
<li><p>call the <a class="reference internal" href="eigen.html#eigen"><span class="std std-ref">eigen Command</span></a> to extract 7 modes of vibration</p></li>
<li><p>call the <a class="reference internal" href="modalProperties.html#modalproperties"><span class="std std-ref">modalProperties Command</span></a> to generate the report with modal properties</p></li>
<li><p>call the <a class="reference internal" href="#responsespectrum"><span class="std std-ref">responseSpectrum Command</span></a> to compute the modal displacements and section forces
*  in a first example the <a class="reference internal" href="#responsespectrum"><span class="std std-ref">responseSpectrum Command</span></a> is called for all modes. Results are obtained from a recorder after the analysis.
*  in a second example the <a class="reference internal" href="#responsespectrum"><span class="std std-ref">responseSpectrum Command</span></a> is called in a for-loop mode-by-mode. Results are obtained within the for-loop usin the <span class="xref std std-ref">eleResponse</span></p></li>
<li><p>do a CQC modal combination</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><a class="reference download internal" download="" href="../../../_downloads/2325156de9f2d98acfed7d8873a10d82/responseSpectrumExample.tcl"><code class="xref download docutils literal notranslate"><span class="pre">responseSpectrumExample.tcl</span></code></a>   <strong>(TCL)</strong>.</div>
<div class="line"><a class="reference download internal" download="" href="../../../_downloads/6dd2bd954c1db847f392751f63edfbcb/responseSpectrumExample.py"><code class="xref download docutils literal notranslate"><span class="pre">responseSpectrumExample.py</span></code></a>   <strong>(Python)</strong>.</div>
</div>
</div>
<p>Code Developed by: <strong>Massimo Petracca</strong> at ASDEA Software, Italy</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The Regents of the University of California.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2431545-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-2431545-1', {
          'anonymize_ip': false,
      });
    </script>  

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>